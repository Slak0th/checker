<!DOCTYPE html>
<html>
<head>
    <title>Bitcoin Transaction Checker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet">
    <style>
        body {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #f2f7ff;
            font-family: 'Montserrat', sans-serif;
        }
        #btc-transaction {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        }
        input[type="text"] {
            padding: 10px;
            font-size: 18px;
            margin-bottom: 20px;
            border: none;
            border-bottom: 2px solid #ccc;
            width: 100%;
            box-sizing: border-box;
        }
        button {
            padding: 10px;
            font-size: 18px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 10px;
        }
        button:hover {
            background-color: #3e8e41;
        }
        #clear-button {
            background-color: #f44336;
        }
        #clear-button:hover {
            background-color: #d32f2f;
        }
        .button-container {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            width: 100%;
            margin-top: 20px;
        }
        .dropdown {
            position: relative;
            display: inline-block;
        }
        .dropdown-content {
            display: none;
            position: absolute;
            z-index: 1;
            background-color: #f9f9f9;
            min-width: 160px;
            max-height: 200px;
            overflow-y: scroll;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
        }
        .dropdown-content a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }
        .dropdown-content a:hover {
            background-color: #f1f1f1;
        }
        .dropdown:hover .dropdown-content {
            display: block;
        }
        #result {
            margin-top: 20px;
            font-size: 20px;
        }
    </style>
</head>
<body>
    <div id="btc-transaction">
        <input type="text" id="hash" placeholder="Enter transaction hash">
        <div class="button-container">
            <button onclick="checkTransaction()">Check Transaction</button>
            <button id="clear-button" onclick="clearInput()">Clear</button>
            <div class="dropdown">
                <button onclick="showCryptoPrices()">Show Crypto Prices</button>
                <div class="dropdown-content" id="crypto-prices">
                    <a href="#" onclick="getCryptoPrice('BTC')">Bitcoin (BTC)</a>
                    <a href="#" onclick="getCryptoPrice('ETH')">Ethereum (ETH)</a>
                    <a href="#" onclick="getCryptoPrice('LTC')">Litecoin (LTC)</a>
                    <a href="#" onclick="getCryptoPrice('XRP')">Ripple (XRP)</a>
                    <a href="#" onclick="getCryptoPrice('BCH')">Bitcoin Cash (BCH)</a>
                    <a href="#" onclick="getCryptoPrice('ADA')">Cardano (ADA)</a>
                    <a href="#" onclick="getCryptoPrice('XLM')">Stellar (XLM)</a>
                    <a href="#" onclick="getCryptoPrice('LINK')">Chainlink (LINK)</a>
                    <a href="#" onclick="getCryptoPrice('DOT')">Polkadot (DOT)</a>
                    <a href="#" onclick="getCryptoPrice('DOGE')">Dogecoin (DOGE)</a>
                    <a href="#" onclick="getCryptoPrice('BNB')">Binance Coin (BNB)</a>
                    <a href="#" onclick="getCryptoPrice('USDT')">Tether (USDT)</a>
                    <a href="#" onclick="getCryptoPrice('USDC')">USD Coin (USDC)</a>
                    <a href="#" onclick="getCryptoPrice('WBTC')">Wrapped Bitcoin (WBTC)</a>
                    <a href="#" onclick="getCryptoPrice('UNI')">Uniswap (UNI)</a>
                    <a href="#" onclick="getCryptoPrice('AAVE')">Aave (AAVE)</a>
                    <a href="#" onclick="getCryptoPrice('COMP')">Compound (COMP)</a>
                    <a href="#" onclick="getCryptoPrice('MKR')">Maker (MKR)</a>
                    <a href="#" onclick="getCryptoPrice('YFI')">Yearn.finance (YFI)</a>
                    <a href="#" onclick="getCryptoPrice('SUSHI')">SushiSwap (SUSHI)</a>
                    <a href="#" onclick="getCryptoPrice('SNX')">Synthetix (SNX)</a>
                    <a href="#" onclick="getCryptoPrice('CRV')">Curve DAO Token (CRV)</a>
                    <a href="#" onclick="getCryptoPrice('GRT')">The Graph (GRT)</a>
                    <a href="#" onclick="getCryptoPrice('REN')">Ren (REN)</a>
                    <a href="#" onclick="getCryptoPrice('BAL')">Balancer (BAL)</a>
                    <a href="#" onclick="getCryptoPrice('1INCH')">1inch (1INCH)</a>
                    <a href="#" onclick="getCryptoPrice('OCEAN')">Ocean Protocol (OCEAN)</a>
                    <a href="#" onclick="getCryptoPrice('ALPHA')">Alpha Finance Lab (ALPHA)</a>
                    <a href="#" onclick="getCryptoPrice('SRM')">Serum (SRM)</a>
                    <a href="#" onclick="getCryptoPrice('HBAR')">Hedera Hashgraph (HBAR)</a>
                    <a href="#" onclick="getCryptoPrice('ZIL')">Zilliqa (ZIL)</a>
                    <a href="#" onclick="getCryptoPrice('CELO')">Celo (CELO)</a>
                    <a href="#" onclick="getCryptoPrice('NEXO')">Nexo (NEXO)</a>
                    <a href="#" onclick="getCryptoPrice('MANA')">Decentraland (MANA)</a>
                    <a href="#" onclick="getCryptoPrice('BAT')">Basic Attention Token (BAT)</a>
                    <a href="#" onclick="getCryptoPrice('CHZ')">Chiliz (CHZ)</a>
                    <a href="#" onclick="getCryptoPrice('ENJ')">Enjin Coin (ENJ)</a>
                    <a href="#" onclick="getCryptoPrice('SAND')">The Sandbox (SAND)</a>
                    <a href="#" onclick="getCryptoPrice('SXP')">Swipe (SXP)</a>
                    <a href="#" onclick="getCryptoPrice('ONE')">Harmony (ONE)</a>
                    <a href="#" onclick="getCryptoPrice('HOT')">Holo (HOT)</a>
                    <a href="#" onclick="getCryptoPrice('ZEN')">Horizen (ZEN)</a>
                    <a href="#" onclick="getCryptoPrice('CKB')">Nervos Network (CKB)</a>
                    <a href="#" onclick="getCryptoPrice('QNT')">Quant (QNT)</a>
                    <a href="#" onclick="getCryptoPrice('RSR')">Reserve Rights (RSR)</a>
                    <a href="#" onclick="getCryptoPrice('SC')">Siacoin (SC)</a>
                    <a href="#" onclick="getCryptoPrice('SXP')">Swipe (SXP)</a>
                    <a href="#" onclick="getCryptoPrice('LUNA')">Terra (LUNA)</a>
                    <a href="#" onclick="getCryptoPrice('TFUEL')">Theta Fuel (TFUEL)</a>
                    <a href="#" onclick="getCryptoPrice('XVG')">Verge (XVG)</a>
                    <a href="#" onclick="getCryptoPrice('VGX')">Voyager Token (VGX)</a>
                    <a href="#" onclick="getCryptoPrice('WAVES')">Waves (WAVES)</a>
                    <a href="#" onclick="getCryptoPrice('XZC')">Zcoin (XZC)</a>
                </div>
            </div>
        </div>
        <div id="result"></div>
    </div>

    <script>
        function checkTransaction() {
          const hash = document.getElementById('hash').value;
          if (hash === '') {
            document.getElementById('result').innerHTML = 'Please enter a transaction hash.';
            return;
          }
          fetch(`https://blockchain.info/rawtx/${hash}`)
            .then(response => response.json())
            .then(data => {
              const blockHeight = data.block_height;
              const timestamp = data.time;
              const address = data.out[0].addr;
              const date = new Date(timestamp * 1000); // Convert seconds to milliseconds
              const dateString = date.toLocaleString();
              if (blockHeight > 0) {
                const link = `https://www.blockchain.com/btc/tx/${hash}`;
                document.getElementById('result').innerHTML = `<div style="display:flex; flex-direction: column; justify-content:center;">
    <div style="text-align: center;">Transaction Confirmed at ${dateString}!</div>
    <div style="text-align: center;"><a href="${link}" target="_blank">Click here to view it on Blockchain.com.</a></div>
</div>`;
              } else {
                document.getElementById('result').innerHTML = 'Transaction not confirmed yet. Please try again later.';
              }
            })
            .catch(error => {
              console.error(error);
              document.getElementById('result').innerHTML = 'Invalid transaction hash. Please try again.';
            });
        }



        function clearInput() {
            document.getElementById('hash').value = '';
            document.getElementById('result').innerHTML = '';
        }

        function showCryptoPrices() {
            document.getElementById('crypto-prices').classList.toggle('show');
        }

        function getCryptoPrice(symbol) {
  const listUrl = 'https://api.coingecko.com/api/v3/coins/list';
  const priceUrl = `https://api.coingecko.com/api/v3/simple/price?ids=${symbol}&vs_currencies=usd`;
  
  let crypto; // Define crypto object in higher scope
  
  // Fetch list of cryptocurrencies
  fetch(listUrl)
    .then(response => response.json())
    .then(data => {
      // Find cryptocurrency with matching symbol
      crypto = data.find(c => c.symbol.toLowerCase() === symbol.toLowerCase());
      if (crypto) {
        // Fetch price data for specified cryptocurrency ID
        return fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${crypto.id}&vs_currencies=usd`);
      } else {
        throw new Error(`Invalid symbol: ${symbol}`);
      }
    })
    .then(response => response.json())
    .then(data => {
      console.log(crypto.id);
      const price = data[crypto.id].usd;
      console.log(price);
      document.getElementById('result').innerHTML = `The price of ${crypto.symbol.toUpperCase()} is $${price.toFixed(2)}.`;
    })
    .catch(error => {
      console.error(error);
      document.getElementById('result').innerHTML = 'Error fetching price data. Please try again later or check <a target="_blank" href="https://coinmarketcap.com/">here</a>.';
    });
}







        window.onclick = function(event) {
            if (!event.target.matches('.dropdown')) {
                const dropdowns = document.getElementsByClassName('dropdown-content');
                for (let i = 0; i < dropdowns.length; i++) {
                    const openDropdown = dropdowns[i];
                    if (openDropdown.classList.contains('show')) {
                        openDropdown.classList.remove('show');
                    }
                }
            }
        }
    </script>
</body>
</html>
